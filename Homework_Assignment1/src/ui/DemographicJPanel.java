/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ui;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.swing.JOptionPane;
import model.DemographicInfo;

/**
 *
 * @author Aishwarya
 */
public class DemographicJPanel extends javax.swing.JPanel {

    /**
     * Creates new form DemographicJPanel
     */
    DemographicInfo demographicInfo;
    public DemographicJPanel(DemographicInfo demographicInfo) {
        initComponents();
        this.demographicInfo = demographicInfo;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTextField17 = new javax.swing.JTextField();
        lblTitle = new javax.swing.JLabel();
        lblFirstName = new javax.swing.JLabel();
        lblLastName = new javax.swing.JLabel();
        lblPhone = new javax.swing.JLabel();
        lblDOB = new javax.swing.JLabel();
        lblheight = new javax.swing.JLabel();
        lblAge = new javax.swing.JLabel();
        lblWeight = new javax.swing.JLabel();
        lblSSN = new javax.swing.JLabel();
        txtFirst = new javax.swing.JTextField();
        txtLast = new javax.swing.JTextField();
        txtPhone = new javax.swing.JTextField();
        txtAge = new javax.swing.JTextField();
        txtHeight = new javax.swing.JTextField();
        txtWeight = new javax.swing.JTextField();
        txtSSN = new javax.swing.JTextField();
        btnSave = new javax.swing.JButton();
        jdcDOB = new com.toedter.calendar.JDateChooser();

        lblTitle.setFont(new java.awt.Font("SansSerif", 1, 20)); // NOI18N
        lblTitle.setForeground(new java.awt.Color(72, 55, 123));
        lblTitle.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblTitle.setText("Demographic Information Form");

        lblFirstName.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblFirstName.setForeground(new java.awt.Color(99, 119, 145));
        lblFirstName.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblFirstName.setText("First Name:");

        lblLastName.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblLastName.setForeground(new java.awt.Color(99, 119, 145));
        lblLastName.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblLastName.setText("Phone Number:");

        lblPhone.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblPhone.setForeground(new java.awt.Color(99, 119, 145));
        lblPhone.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblPhone.setText("Last Name:");

        lblDOB.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblDOB.setForeground(new java.awt.Color(99, 119, 145));
        lblDOB.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblDOB.setText("Date of Birth:");

        lblheight.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblheight.setForeground(new java.awt.Color(99, 119, 145));
        lblheight.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblheight.setText("Height:");

        lblAge.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblAge.setForeground(new java.awt.Color(99, 119, 145));
        lblAge.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblAge.setText("Age:");

        lblWeight.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblWeight.setForeground(new java.awt.Color(99, 119, 145));
        lblWeight.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblWeight.setText("Weight:");

        lblSSN.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        lblSSN.setForeground(new java.awt.Color(99, 119, 145));
        lblSSN.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblSSN.setText("Social Security Number:");

        txtFirst.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        txtLast.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        txtPhone.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        txtAge.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        txtAge.setEnabled(false);

        txtHeight.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        txtWeight.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        txtSSN.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        btnSave.setFont(new java.awt.Font("SansSerif", 1, 18)); // NOI18N
        btnSave.setForeground(new java.awt.Color(26, 79, 130));
        btnSave.setText("Save");
        btnSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(lblTitle, javax.swing.GroupLayout.DEFAULT_SIZE, 600, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(83, 83, 83)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(lblSSN)
                            .addComponent(lblPhone)
                            .addComponent(lblFirstName)
                            .addComponent(lblDOB)
                            .addComponent(lblLastName)
                            .addComponent(lblAge)
                            .addComponent(lblheight)
                            .addComponent(lblWeight))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(txtFirst, javax.swing.GroupLayout.DEFAULT_SIZE, 183, Short.MAX_VALUE)
                            .addComponent(txtLast, javax.swing.GroupLayout.DEFAULT_SIZE, 183, Short.MAX_VALUE)
                            .addComponent(txtPhone, javax.swing.GroupLayout.DEFAULT_SIZE, 183, Short.MAX_VALUE)
                            .addComponent(txtAge, javax.swing.GroupLayout.DEFAULT_SIZE, 183, Short.MAX_VALUE)
                            .addComponent(txtHeight, javax.swing.GroupLayout.DEFAULT_SIZE, 183, Short.MAX_VALUE)
                            .addComponent(txtWeight, javax.swing.GroupLayout.DEFAULT_SIZE, 183, Short.MAX_VALUE)
                            .addComponent(txtSSN, javax.swing.GroupLayout.DEFAULT_SIZE, 183, Short.MAX_VALUE)
                            .addComponent(jdcDOB, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(235, 235, 235)
                        .addComponent(btnSave, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(44, 44, 44)
                .addComponent(lblTitle)
                .addGap(37, 37, 37)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblFirstName)
                    .addComponent(txtFirst, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblPhone)
                    .addComponent(txtLast, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblLastName)
                    .addComponent(txtPhone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblDOB)
                    .addComponent(jdcDOB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblAge)
                    .addComponent(txtAge, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblheight)
                    .addComponent(txtHeight, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblWeight)
                    .addComponent(txtWeight, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblSSN)
                    .addComponent(txtSSN, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(31, 31, 31)
                .addComponent(btnSave, javax.swing.GroupLayout.PREFERRED_SIZE, 47, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(109, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btnSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveActionPerformed
       if(txtFirst.getText().isEmpty()||txtHeight.getText().isEmpty()||txtLast.getText().isEmpty()||txtPhone.getText().isEmpty()||txtSSN.getText().isEmpty()||txtWeight.getText().isEmpty()){
            JOptionPane.showMessageDialog(this, "Please fillup all the fields","Error",JOptionPane.ERROR_MESSAGE); 
        } else if(jdcDOB.getDate() == null){
            JOptionPane.showMessageDialog(this, "Please select Date of Birth","Error",JOptionPane.ERROR_MESSAGE);
        } else if(!txtFirst.getText().matches("^[a-zA-Z]+$")){
            JOptionPane.showMessageDialog(null, "Please enter only characters in First Name","Error",JOptionPane.ERROR_MESSAGE);
        } else if(!txtLast.getText().matches("^[a-zA-Z]+$")){
            JOptionPane.showMessageDialog(null, "Please enter only characters in Last Name","Error",JOptionPane.ERROR_MESSAGE);
        } else if(!txtHeight.getText().matches("^[0-9]+\\'?[0-9]+\\\"$")){
            JOptionPane.showMessageDialog(null, "Please enter valid Height in Inch","Error",JOptionPane.ERROR_MESSAGE);
        }else if(!txtWeight.getText().matches("(([\\d.]+)\\s+(lbs?|oz|g|kg))")){
            JOptionPane.showMessageDialog(null, "Please enter valid Weight with units i.e kg, g, lbs","Error",JOptionPane.ERROR_MESSAGE);
        } else if(!txtSSN.getText().matches("^(\\d{3}-?\\d{2}-?\\d{4}|XXX-XX-XXXX)$")){
            JOptionPane.showMessageDialog(null, "Please enter valid Social Security Number","Error",JOptionPane.ERROR_MESSAGE);
        } else if(!txtPhone.getText().matches("^(\\+\\d{1,3}[- ]?)?\\d{10}$") && !txtPhone.getText().matches("^\\([0-9]{3}\\)[0-9]{3}-[0-9]{4}$")){
            JOptionPane.showMessageDialog(null, "Please enter valid Phone Number","Error",JOptionPane.ERROR_MESSAGE);
        } else {
            DateFormat fmt = new SimpleDateFormat("dd/MM/yyyy");
            DateFormat year = new SimpleDateFormat("yyyy");
            int ageDiff = 0;
            int DOB = Integer.parseInt(year.format(jdcDOB.getDate()));
            ageDiff = 2021-DOB;
            demographicInfo.setFirstName(txtFirst.getText());
            demographicInfo.setLastName(txtLast.getText());
            demographicInfo.setPhoneNum(Long.parseLong(txtPhone.getText()));
            demographicInfo.setAge(ageDiff);
            txtAge.setText(String.valueOf(ageDiff));
            demographicInfo.setHeight(txtHeight.getText());
            demographicInfo.setWeight(txtWeight.getText());
            demographicInfo.setSSN(txtSSN.getText());
            demographicInfo.setDOB(fmt.format(jdcDOB.getDate()));
            
            JOptionPane.showMessageDialog(this, "Demographic Information Submitted!");
        }
        

    }//GEN-LAST:event_btnSaveActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnSave;
    private javax.swing.JTextField jTextField17;
    private com.toedter.calendar.JDateChooser jdcDOB;
    private javax.swing.JLabel lblAge;
    private javax.swing.JLabel lblDOB;
    private javax.swing.JLabel lblFirstName;
    private javax.swing.JLabel lblLastName;
    private javax.swing.JLabel lblPhone;
    private javax.swing.JLabel lblSSN;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JLabel lblWeight;
    private javax.swing.JLabel lblheight;
    private javax.swing.JTextField txtAge;
    private javax.swing.JTextField txtFirst;
    private javax.swing.JTextField txtHeight;
    private javax.swing.JTextField txtLast;
    private javax.swing.JTextField txtPhone;
    private javax.swing.JTextField txtSSN;
    private javax.swing.JTextField txtWeight;
    // End of variables declaration//GEN-END:variables
}
